{"version":3,"sources":["index.js"],"names":["loader_div","get_api_data","method","params","callback","http_request","XMLHttpRequest","p","i","open","replace","send","document","body","innerHTML","console","error","onreadystatechange","readyState","getElementById","remove","show_page","page_name","xml","responseText","fix_link","log","querySelectorAll","forEach","elem","setAttribute","getAttribute","removeAttribute","onclick","ev","preventDefault","slice"],"mappings":";AAAA,IAAMA,EAAa,0BAEnB,SAASC,EAAaC,EAAQC,EAAQC,GAC5BC,IAAAA,EAAe,IAAIC,eACrBC,EAAI,GACH,IAAA,IAAIC,KAAKL,EACVI,GAAKC,EAAI,IAAML,EAAOK,GAAK,IAG/BH,EAAaI,KAAK,MAAO,QAAUP,EAAOQ,QAAQ,IAAK,IAAM,IAAMH,GAAG,GACnE,IACCF,EAAaM,OACbC,SAASC,KAAKC,UAAYd,EAAaY,SAASC,KAAKC,UAEzD,MAAK,GACDC,QAAQC,MAAM,gBAElBX,EAAaY,mBAAqB,WAC1BZ,GAA4B,IAA5BA,EAAaa,WAEVd,OADPQ,SAASO,eAAe,UAAUC,SAC3BhB,EAASC,IAKxB,SAASgB,EAAUC,GAIXrB,EAAa,WAAY,CACrBqB,UAAWA,GACZ,SAAAC,GACCX,SAASO,eAAe,WAAWL,UAAYS,EAAIC,aACnDC,MAMZ,SAASA,IACLV,QAAQW,IAAI,kBAEHd,SAASe,iBAAiB,KAEjCC,QAAQ,SAAAC,GACNA,EAAKC,aAAa,WAAYD,EAAKE,aAAa,SAChDF,EAAKG,gBAAgB,QAErBH,EAAKI,QAAU,SAAAC,GAIJ,OAHPA,EAAGC,iBACHpB,QAAQW,IAAI,UAAWG,EAAKE,aAAa,aACzCV,EAAUQ,EAAKE,aAAa,YAAYK,MAAM,GAAG1B,QAAQ,QAAS,MAC3D,KAKnBe","file":"src.91f0c5b8.js","sourceRoot":"../src","sourcesContent":["const loader_div = '<div id=\"loader\"></div>';\n\nfunction get_api_data(method, params, callback) {\n    const http_request = new XMLHttpRequest();\n    let p = '';\n    for (let i in params) {\n        p += i + '=' + params[i] + '&'\n    }\n\n    http_request.open('GET', '/api/' + method.replace('/', '') + '?' + p, true)\n    try{\n        http_request.send();\n        document.body.innerHTML = loader_div + document.body.innerHTML\n    }\n    catch{\n        console.error('Error in xhr');\n    }\n    http_request.onreadystatechange = function() {\n        if (http_request.readyState !== 4) return;\n        document.getElementById('loader').remove();\n        return callback(http_request);\n    }\n}\n\n\nfunction show_page(page_name) {\n    //var run_on_server = !!location.href.indexOf('file://'); //debug code\n    let run_on_server = true;\n    if(run_on_server){\n        get_api_data(\"get_page\", {\n            page_name: page_name\n        }, xml => {\n            document.getElementById('content').innerHTML = xml.responseText;\n            fix_link();\n        })\n    }\n    else location.href=page_name.slice(1);\n}\n\nfunction fix_link() {\n    console.log(\"Started fix...\");\n    // Fix link\n    let q = (document.querySelectorAll(\"a\"));\n    //console.log(q);\n    q.forEach(elem => {\n        elem.setAttribute('tab_link', elem.getAttribute('href'));\n        elem.removeAttribute('href');\n\n        elem.onclick = ev => {\n            ev.preventDefault();\n            console.log(\"Link to\", elem.getAttribute('tab_link'));\n            show_page(elem.getAttribute('tab_link').slice(1).replace('.html', ''));\n            return false;\n        };\n    })\n}\n\nfix_link();"]}