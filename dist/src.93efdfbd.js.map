{"version":3,"sources":["index.js"],"names":["loader_div","get_api_data","method","params","callback","http_request","XMLHttpRequest","p","i","open","replace","send","document","body","innerHTML","console","error","onreadystatechange","readyState","getElementById","remove","JSON","parse","responseText","show_page","page_name","log","split","forEach","key","value","data","page","render_tasks","call_func","eval","fix_link","q","querySelectorAll","quest_count","elem","href","setAttribute","getAttribute","removeAttribute","localStorage","getItem","onclick","ev","preventDefault","slice","quest_init","raw_data","innerText","header","text","howto"],"mappings":";AAgGQ,SAAA,eAAA,EAAA,GAAA,OAAA,gBAAA,IAAA,sBAAA,EAAA,IAAA,mBAAA,SAAA,mBAAA,MAAA,IAAA,UAAA,wDAAA,SAAA,sBAAA,EAAA,GAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,EAAA,SAAA,gBAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAhGR,IAAMA,WAAa,0BAEnB,SAASC,aAAaC,EAAQC,EAAQC,GAC5BC,IAAAA,EAAe,IAAIC,eACrBC,EAAI,GACH,IAAA,IAAIC,KAAKL,EACVI,GAAKC,EAAI,IAAML,EAAOK,GAAK,IAG/BH,EAAaI,KAAK,MAAO,QAAUP,EAAOQ,QAAQ,IAAK,IAAM,IAAMH,GAAG,GACnE,IACCF,EAAaM,OACbC,SAASC,KAAKC,UAAYd,WAAaY,SAASC,KAAKC,UAEzD,MAAK,GACDC,QAAQC,MAAM,gBAElBX,EAAaY,mBAAqB,WAC1BZ,GAA4B,IAA5BA,EAAaa,WAEVd,OADPQ,SAASO,eAAe,UAAUC,SAC3BhB,EAASiB,KAAKC,MAAMjB,EAAakB,gBAKhD,SAASC,UAAUC,UAAWtB,QACtBI,IAAAA,EAAI,CACJkB,UAAWA,WAEfV,QAAQW,IAAI,UAAWvB,QACnBA,QACAA,OAAOwB,MAAM,KAAKC,QAAQ,SAAApB,GACHA,IADQ,EAAA,eACRA,EAAEmB,MAAM,KADA,GACtBE,EADsB,EAAA,GACjBC,EADiB,EAAA,GAE3BvB,EAAEsB,GAAOC,IAGjBf,QAAQW,IAAI,yBAA0BnB,GACtCN,aAAa,WAAYM,EAAG,SAAAwB,MACxBnB,SAASO,eAAe,WAAWL,UAAYiB,KAAKC,KAS9C,KARFP,UAAUf,QACV,QAAS,IACXA,QACE,QACA,IACFA,QACE,IACA,KACMuB,eACNF,KAAKG,WAAWC,KAAKJ,KAAKG,UAAY,UAC1CE,aAIR,SAASA,WACLrB,QAAQW,IAAI,kBAERW,IAAAA,EAAKzB,SAAS0B,iBAAiB,KAE/BC,EAAc,EAClBF,EAAET,QAAQ,SAAAY,GAKEC,OAJRD,EAAKE,aAAa,WAAYF,EAAKG,aAAa,SAChDH,EAAKE,aAAa,OAAQ,IAC1BF,EAAKI,gBAAgB,QACVJ,EAAKG,aAAa,aAEpB,IAAA,mBACDH,EAAKE,aAAa,WACd,eACJH,IACAC,EAAKE,aAAa,SACd,YAAcH,EAAc,YAAcM,aAAaC,QAAQ,YAG3EN,EAAKO,QAAU,SAAAC,GAKJ,OAJPA,EAAGC,iBACHlC,QAAQW,IAAI,UAAWc,EAAKG,aAAa,aACzCnB,UAAUgB,EAAKG,aAAa,YAAYO,MAAM,GAAGxC,QAAQ,QAAS,IAC9D8B,EAAKG,aAAa,YACf,KAKnB,SAASQ,WAAWC,GACZrB,IAAAA,EAAOqB,EAASrB,KAChBlB,EAAOD,SAASO,eAAe,QACnCP,SAASO,eAAe,eAAekC,UAAYtB,EAAKuB,OACxDvB,EAAKlB,KAAKe,QAAQ,SAAAY,GACd3B,EAAKC,WAAa,qBAAuB0B,EAAKc,OAAS,4BAC3Bd,EAAKe,KAAO,kBAE5C3C,SAASO,eAAe,cAAckC,UAAYtB,EAAKyB,MAAMF,OAC7D1C,SAASO,eAAe,eAAekC,UAAYtB,EAAKyB,MAAMD,KAC9DxC,QAAQW,IAAIK,GAGhBK","file":"src.93efdfbd.js","sourceRoot":"../src","sourcesContent":["const loader_div = '<div id=\"loader\"></div>';\n\nfunction get_api_data(method, params, callback) {\n    const http_request = new XMLHttpRequest();\n    let p = '';\n    for (let i in params) {\n        p += i + '=' + params[i] + '&'\n    }\n\n    http_request.open('GET', '/api/' + method.replace('/', '') + '?' + p, true)\n    try{\n        http_request.send();\n        document.body.innerHTML = loader_div + document.body.innerHTML\n    }\n    catch{\n        console.error('Error in xhr');\n    }\n    http_request.onreadystatechange = function() {\n        if (http_request.readyState !== 4) return;\n        document.getElementById('loader').remove();\n        return callback(JSON.parse(http_request.responseText));\n    }\n}\n\n\nfunction show_page(page_name, params) {\n    let p = {\n        page_name: page_name\n    };\n    console.log(\"PARAMS:\", params);\n    if (params) {\n        params.split('&').forEach(i => {\n            let [key, value] = i.split('=');\n            p[key] = value\n        })\n    }\n    console.log(\"Show page with params:\", p);\n    get_api_data(\"get_page\", p, data => {\n        document.getElementById('content').innerHTML = data.page;\n        if (page_name.replace(\n            '.html', ''\n        ).replace(\n            'index',\n            ''\n        ).replace(\n            '/',\n            ''\n        ) === '') render_tasks();\n        if (data.call_func) eval(data.call_func + \"(data)\");\n        fix_link();\n    })\n}\n\nfunction fix_link() {\n    console.log(\"Started fix...\");\n    // Fix link\n    let q = (document.querySelectorAll(\"a\"));\n    //console.log(q);\n    let quest_count = 0;\n    q.forEach(elem => {\n        elem.setAttribute('tab_link', elem.getAttribute('href'));\n        elem.setAttribute('href', '');\n        elem.removeAttribute('href');\n        let href = elem.getAttribute('tab_link');\n        switch (href) {\n            case '/quest_page.html':\n                elem.setAttribute('tab_link',\n                    '/quest_page');\n                quest_count++;\n                elem.setAttribute('params',\n                    'quest_id=' + quest_count + '&user_id=' + localStorage.getItem('user_id'))\n        }\n\n        elem.onclick = ev => {\n            ev.preventDefault();\n            console.log(\"Link to\", elem.getAttribute('tab_link'));\n            show_page(elem.getAttribute('tab_link').slice(1).replace('.html', ''),\n                elem.getAttribute('params'));\n            return false;\n        };\n    })\n}\n\nfunction quest_init(raw_data) {\n    let data = raw_data.data;\n    let body = document.getElementById('text');\n    document.getElementById('header_main').innerText = data.header;\n    data.body.forEach(elem => {\n        body.innerHTML += '<div class=\"fact\">' + elem.header + '</div>' +\n            '<div class=\"fact2\">' + elem.text + '</div> <br />'\n    });\n    document.getElementById('header_fix').innerText = data.howto.header;\n    document.getElementById('content_fix').innerText = data.howto.text;\n    console.log(data)\n}\n\nfix_link();"]}