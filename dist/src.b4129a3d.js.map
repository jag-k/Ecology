{"version":3,"sources":["index.js"],"names":["loader_div","get_api_data","method","params","callback","http_request","XMLHttpRequest","p","i","open","replace","send","document","body","innerHTML","console","error","onreadystatechange","readyState","getElementById","remove","res","responseText","JSON","parse","log","show_page","page_name","user_id","localStorage","getItem","split","forEach","key","value","data","page","call_func","eval","fix_link","q","querySelectorAll","quest_count","elem","href","setAttribute","getAttribute","removeAttribute","onclick","ev","preventDefault","slice","quest_init","raw_data","innerText","header","text","howto","slideIndex","plusSlide","showSlides","minusSlide","currentSlide","n","slides","getElementsByClassName","dots","length","style","display","className","init_slider","slider_button_back","slider_button_next","addEventListener","d"],"mappings":"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","file":"src.b4129a3d.js","sourceRoot":"../src","sourcesContent":["const loader_div = '<div id=\"loader\"></div>';\r\n\r\nfunction get_api_data(method, params, callback) {\r\n    const http_request = new XMLHttpRequest();\r\n    let p = '';\r\n    for (let i in params) {\r\n        p += i + '=' + params[i] + '&'\r\n    }\r\n\r\n    http_request.open('GET', '/api/' + method.replace('/', '') + '?' + p, true)\r\n    try{\r\n        http_request.send();\r\n        document.body.innerHTML = loader_div + document.body.innerHTML\r\n    }\r\n    catch{\r\n        console.error('Error in xhr');\r\n    }\r\n    http_request.onreadystatechange = function() {\r\n        if (http_request.readyState !== 4) return;\r\n        document.getElementById('loader').remove();\r\n        let res = http_request.responseText;\r\n        try {\r\n            res = JSON.parse(res);\r\n            return callback(res)\r\n        } catch {\r\n            console.log(\"RESPONSE TEXT:\", res);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction show_page(page_name, params) {\r\n    let p = {\r\n        page_name: page_name,\r\n        user_id: localStorage.getItem('user_id')\r\n    };\r\n    console.log(\"PARAMS:\", params);\r\n    if (params) {\r\n        params.split('&').forEach(i => {\r\n            let [key, value] = i.split('=');\r\n            p[key] = value\r\n        })\r\n    }\r\n    console.log(\"Show page with params:\", p);\r\n    get_api_data(\"get_page\", p, data => {\r\n        document.getElementById('content').innerHTML = data.page;\r\n        if (data.call_func) {\r\n            eval(data.call_func + \"(data)\");\r\n        }\r\n        fix_link();\r\n    })\r\n}\r\n\r\nfunction fix_link() {\r\n    console.log(\"Started fix...\");\r\n    // Fix link\r\n    let q = (document.querySelectorAll(\"a\"));\r\n    //console.log(q);\r\n    let quest_count = 0;\r\n    q.forEach(elem => {\r\n        elem.setAttribute('tab_link', elem.getAttribute('href'));\r\n        elem.setAttribute('href', '');\r\n        elem.removeAttribute('href');\r\n        let href = elem.getAttribute('tab_link');\r\n        switch (href) {\r\n            case '/quest_page.html':\r\n                elem.setAttribute('tab_link',\r\n                    '/quest_page');\r\n                quest_count++;\r\n                elem.setAttribute('params',\r\n                    'quest_id=' + quest_count + '&user_id=' + localStorage.getItem('user_id'))\r\n        }\r\n\r\n        elem.onclick = ev => {\r\n            ev.preventDefault();\r\n            console.log(\"Link to\", elem.getAttribute('tab_link'));\r\n            show_page(elem.getAttribute('tab_link').slice(1).replace('.html', ''),\r\n                elem.getAttribute('params'));\r\n            return false;\r\n        };\r\n    })\r\n}\r\n\r\nfunction quest_init(raw_data) {\r\n    let data = raw_data.data;\r\n    let body = document.getElementById('text');\r\n    document.getElementById('header_main').innerText = data.header;\r\n    data.body.forEach(elem => {\r\n        body.innerHTML += '<div class=\"fact\">' + elem.header + '</div>' +\r\n            '<div class=\"fact2\">' + elem.text + '</div> <br />'\r\n    });\r\n    document.getElementById('header_fix').innerText = data.howto.header;\r\n    document.getElementById('content_fix').innerText = data.howto.text;\r\n    console.log(data)\r\n}\r\n\r\n// SLIDES\r\n/* Индекс слайда по умолчанию */\r\nvar slideIndex = 1;\r\n\r\n/* Функция увеличивает индекс на 1, показывает следующй слайд*/\r\nfunction plusSlide() {\r\n    showSlides(slideIndex += 1);\r\n}\r\n\r\n/* Функция уменьшяет индекс на 1, показывает предыдущий слайд*/\r\nfunction minusSlide() {\r\n    showSlides(slideIndex -= 1);\r\n}\r\n\r\n/* Устанавливает текущий слайд */\r\nfunction currentSlide(n) {\r\n\r\n    showSlides(slideIndex = n);\r\n}\r\n\r\n/* Основная функция сладера */\r\nfunction showSlides(n) {\r\n    var i;\r\n    var slides = document.getElementsByClassName(\"item\");\r\n    var dots = document.getElementsByClassName(\"slider-dots_item\");\r\n    console.log(n);\r\n    console.log(slides);\r\n    console.log(dots);\r\n    if (n > slides.length) {\r\n      slideIndex = 1\r\n    }\r\n    if (n < 1) {\r\n        slideIndex = slides.length\r\n    }\r\n    for (i = 0; i < slides.length; i++) {\r\n        slides[i].style.display = \"none\";\r\n    }\r\n    for (i = 0; i < dots.length; i++) {\r\n        dots[i].className = dots[i].className.replace(\" active\", \"\");\r\n    }\r\n    slides[slideIndex - 1].style.display = \"block\";\r\n    dots[slideIndex - 1].className += \" active\";\r\n    // var d = data[Object.keys(data)[slideIndex-1]];\r\n    // var problem = document.getElementsByClassName('text')[0];\r\n    // var solution = document.getElementsByClassName('text')[1];\r\n    // problem.innerHTML = d.problem;\r\n    // solution.innerHTML = d.solution;\r\n}\r\n\r\nfunction init_slider(data) {\r\n    let n = data.data;\r\n    let dots = document.getElementsByClassName(\"slider-dots_item\");\r\n    let [slider_button_back, slider_button_next] = document.getElementsByClassName('slider-button');\r\n    console.log(slider_button_back, slider_button_next);\r\n\r\n    for (i = 0; i < dots.length; i++) {\r\n        dots[i].addEventListener('click', d => currentSlide(i));\r\n    }\r\n    slider_button_next.addEventListener('click', plusSlide);\r\n    slider_button_back.addEventListener('click', minusSlide);\r\n    showSlides(n);\r\n}\r\n\r\nfix_link();"]}